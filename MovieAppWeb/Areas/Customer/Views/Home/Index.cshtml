@model IEnumerable<Movie>

<style>
    
    .movie-card-img {
        width: 100%; /* Full width of container */
        aspect-ratio: 2/3; /* Standard movie poster aspect ratio (2:3) */
        object-fit: cover; /* Crop image to fill container while maintaining aspect ratio */
        object-position: top center; /* Prioritize showing the top center of images (faces/headlines) */
    }

    .movie-card {
        height: 100%; /* Take full height of grid column */
        display: flex; /* Enable flexbox layout */
        flex-direction: column; /* Stack children vertically */
        transition: transform 0.3s ease; /* Smooth hover animation */
    }

    .movie-card:hover {
        transform: translateY(-5px); /* Lift card 5px on hover */
    }
    
    .movie-card-body {
        flex-grow: 1; /* Expand to fill available space */
        padding: 1.25rem; /* Standard card padding */
        display: flex;
        flex-direction: column;
    }
   
    .movie-title {
        display: -webkit-box; /* Required for line clamping */
        -webkit-line-clamp: 2; /* Limit title to 2 lines */
        -webkit-box-orient: vertical; /* Vertical line stacking */
        overflow: hidden; /* Hide overflow content */
        text-overflow: ellipsis; /* Add ... for truncated text */
        min-height: 3em; /* Consistent height even for 1-line titles */
        margin-bottom: 0.5rem; /* Space below title */
    }

    .movie-price {
        margin-top: auto; /* Push prices to bottom of flex container */
    }

    @@media (max-width: 768px) {
        .movie-card-img {
            aspect-ratio: 3/4; /* Slightly different ratio for mobile */
        }
    }
</style>

<!-- Main Grid Container -->
<div class="row g-4 pb-3">
    <!-- g-4 adds consistent gutter spacing -->
    @foreach (var movie in Model)
    {
        <!-- Grid Column - responsive widths -->
        <div class="col-xl-3 col-lg-4 col-md-6 col-sm-6 mb-4">
            <!-- Card Container -->
            <div class="card shadow border-0 h-100 movie-card">

                <!-- Movie Poster Image -->
                <img src="@movie.ImageUrl"
                     class="card-img-top movie-card-img"
                     alt="@movie.Name poster">  
                <!-- Card Content Area -->
                <div class="card-body movie-card-body">
                    <!-- Movie Title -->
                    <h5 class="card-title text-dark text-center movie-title">@movie.Name</h5>
                    <!-- Director -->
                    <p class="text-muted text-center mb-2">by @movie.Director</p>

                    <!-- Pricing Section -->
                    <div class="movie-price">
                        <!-- Original Price (strikethrough) -->
                        <p class="text-center mb-1">
                            <span class="text-decoration-line-through text-muted">
                                @movie.ListPrice.ToString("c")  
                            </span>
                        </p>
                        <!-- Discounted Price -->
                        <p class="text-center fw-bold text-primary">
                            As low as: @movie.Price10.ToString("c")
                        </p>
                    </div>
                </div>

                <!-- Details Button -->
                <div class="card-footer bg-transparent border-0 pb-3 pt-0">
                    <a asp-action="Details"
                       asp-route-movieId="@movie.Id"
                       class="btn btn-primary w-100 py-2">
                        DETAILS
                    </a>
                </div>
            </div>
        </div>
    }
</div>